#!/usr/bin/env bash

set -eu

# Argument provided, use it as workspace name
workspace="$1"
VM0_WORKSPACES="${VM0_WORKSPACES:-$HOME/workspaces}"
FOLDER="$VM0_WORKSPACES/$workspace"
(cd "$FOLDER" && git pull)
npx @devcontainers/cli up --workspace-folder "$FOLDER" \
    --dotfiles-repository $VM0_DOTFILES \
    --remove-existing-container