---
title: Claude
description: Use Claude models with full control over Opus, Sonnet, and Haiku selection
---

Use Claude models with Claude Code. This gives you full control over model selection for different tasks and provides access to the latest Claude models.

## Configuration

Configure your agent to use specific Claude models by setting environment variables:

```yaml title="vm0.yaml"
version: "1.0"

agents:
  my-agent:
    provider: claude-code
    environment:
      # Required: One of the following authentication methods
      CLAUDE_CODE_OAUTH_TOKEN: "${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}" # [!code highlight]

      # Optional: Configure specific models for each tier
      ANTHROPIC_DEFAULT_OPUS_MODEL: "claude-opus-4-5-20251101" # [!code highlight]
      ANTHROPIC_DEFAULT_SONNET_MODEL: "claude-sonnet-4-5-20250929" # [!code highlight]
      ANTHROPIC_DEFAULT_HAIKU_MODEL: "claude-haiku-4-5-20251001" # [!code highlight]
      CLAUDE_CODE_SUBAGENT_MODEL: "claude-sonnet-4-5-20250929" # [!code highlight]
```

## Environment Variables

### Authentication

You must configure **one** of the following authentication methods:

| Name                      | Description                                                                 | Pricing         |
| ------------------------- | --------------------------------------------------------------------------- | --------------- |
| `CLAUDE_CODE_OAUTH_TOKEN` | OAuth token from `claude setup-token` (requires Pro/Max subscription)       | Fixed monthly   |
| `ANTHROPIC_API_KEY`       | API key from [Anthropic Console](https://console.anthropic.com/settings/keys) | Pay-per-token   |

**OAuth Token (Subscription):** Get your OAuth token by running `claude setup-token` in your terminal. This uses your Claude Pro or Max subscription with unlimited usage.

**API Key (Pay-per-use):** Get your API key from the [Anthropic Console](https://console.anthropic.com/settings/keys). You'll be charged based on token usage.

<Callout type="warning">
  Do not set both `CLAUDE_CODE_OAUTH_TOKEN` and `ANTHROPIC_API_KEY` at the same time. This will cause authentication conflicts.
</Callout>

### Optional Model Configuration

These environment variables allow you to specify which Claude model to use for different tasks:

| Variable                          | Description                                           | Default                      |
| --------------------------------- | ----------------------------------------------------- | ---------------------------- |
| `ANTHROPIC_DEFAULT_OPUS_MODEL`    | Model for `opus`, or `opusplan` when Plan Mode is active | Latest Opus model            |
| `ANTHROPIC_DEFAULT_SONNET_MODEL`  | Model for `sonnet`, or `opusplan` when Plan Mode is inactive | Latest Sonnet model       |
| `ANTHROPIC_DEFAULT_HAIKU_MODEL`   | Model for `haiku`, or background functionality        | Latest Haiku model           |
| `CLAUDE_CODE_SUBAGENT_MODEL`      | Model for subagents                                   | Latest Sonnet model          |

<Callout type="info">
  If you don't specify these variables, Claude Code will automatically use the latest available models for each tier.
</Callout>

## Available Models

See the complete list of available Claude models and their specifications in the [Anthropic documentation](https://docs.anthropic.com/en/docs/about-claude/models).

<Callout type="warning">
  You must use the **full model name** (e.g., `claude-sonnet-4-5-20250929`) in the environment variables, not aliases like `opus`, `sonnet`, or `haiku`.
</Callout>

## Usage Examples

### Use Latest Models (Default)

If you don't specify model environment variables, Claude Code automatically uses the latest models:

```yaml title="vm0.yaml"
version: "1.0"

agents:
  my-agent:
    provider: claude-code
    environment:
      CLAUDE_CODE_OAUTH_TOKEN: "${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}"
```

### Use API Key Instead of OAuth Token

If you prefer pay-per-token pricing or don't have a Claude subscription:

```yaml title="vm0.yaml"
version: "1.0"

agents:
  my-agent:
    provider: claude-code
    environment:
      ANTHROPIC_API_KEY: "${{ secrets.ANTHROPIC_API_KEY }}" # [!code highlight]
```

### Use All Opus Models

For maximum intelligence across all tasks:

```yaml title="vm0.yaml"
version: "1.0"

agents:
  my-agent:
    provider: claude-code
    environment:
      CLAUDE_CODE_OAUTH_TOKEN: "${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}"
      ANTHROPIC_DEFAULT_OPUS_MODEL: "claude-opus-4-5-20251101" # [!code highlight]
      ANTHROPIC_DEFAULT_SONNET_MODEL: "claude-opus-4-5-20251101" # [!code highlight]
      ANTHROPIC_DEFAULT_HAIKU_MODEL: "claude-opus-4-5-20251101" # [!code highlight]
      CLAUDE_CODE_SUBAGENT_MODEL: "claude-opus-4-5-20251101" # [!code highlight]
```

### Use All Sonnet Models

For balanced performance and cost:

```yaml title="vm0.yaml"
version: "1.0"

agents:
  my-agent:
    provider: claude-code
    environment:
      CLAUDE_CODE_OAUTH_TOKEN: "${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}"
      ANTHROPIC_DEFAULT_OPUS_MODEL: "claude-sonnet-4-5-20250929" # [!code highlight]
      ANTHROPIC_DEFAULT_SONNET_MODEL: "claude-sonnet-4-5-20250929" # [!code highlight]
      ANTHROPIC_DEFAULT_HAIKU_MODEL: "claude-sonnet-4-5-20250929" # [!code highlight]
      CLAUDE_CODE_SUBAGENT_MODEL: "claude-sonnet-4-5-20250929" # [!code highlight]
```

### Use All Haiku Models

For maximum speed and cost-efficiency:

```yaml title="vm0.yaml"
version: "1.0"

agents:
  my-agent:
    provider: claude-code
    environment:
      CLAUDE_CODE_OAUTH_TOKEN: "${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}"
      ANTHROPIC_DEFAULT_OPUS_MODEL: "claude-haiku-4-5-20251001" # [!code highlight]
      ANTHROPIC_DEFAULT_SONNET_MODEL: "claude-haiku-4-5-20251001" # [!code highlight]
      ANTHROPIC_DEFAULT_HAIKU_MODEL: "claude-haiku-4-5-20251001" # [!code highlight]
      CLAUDE_CODE_SUBAGENT_MODEL: "claude-haiku-4-5-20251001" # [!code highlight]
```

## Resources

- [Claude Code Documentation](https://code.claude.com/docs/en/model-config) - Model configuration guide
- [Claude API Documentation](https://docs.anthropic.com/en/api/getting-started)
- [Model Comparison](https://docs.anthropic.com/en/docs/about-claude/models)
- [Pricing](https://www.anthropic.com/pricing)
